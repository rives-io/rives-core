# Commands to test the App

## Interacting with WA

### Mutations

First set one of the inputs

- Snake insert cartridge

```shell
input=6873717303000000000000000000020000000000040011005000010004000000480000000000000090080000000000008808000000000000ffffffffffffffffec0700000000000056080000000000008208000000000000fffffffffffffffffd377a585a0000016922de3603c0c302ff0321010a000000f7a61299e001fe013b5d003d8280191b9ae8b8a76e26775d26cf2b48a4875b3c23c1bc52d95c1b242271f410c673f3863641a38fe54257d507ccc074061887d1e46050c4ed6743bb17c51d87b686348ba0a0cf00a4c55ef988e2f1683e8225864e8234d2671db11b3f90bca35a6ce01c6f959fd480486eca88100272a1109d69cc117af09af11229b6fd63a4b6efdf1ef2ae31318e6ed87c5670110cd0fee7d57b871529a1303cac1e0a5717e372b34ec69c53e8edbf0a12617bd6c12e343e2a09194eeef6936d7146b770053ace2d97b1c453e3126e45591209f0d614ebefe9780f6ab734156382848b3c73f406a8a2d6fbe4e2e12c3005dd2cfd33127c8828c0e530637ea0cf5be454468dd0adc945133222e882d21677dd0c781428c63cc83a595efb3a2e18631a07aa48edc6396877087e960ec5d957930905c011f4f3be4ded694600000000b6f39c340001d702ff0300008213ed6a3e300d8b020000000001595afd377a585a0000016922de3603c0d70bd81721010a000000ace2d67be00bd705cf5d003f914584683d89a6da8ae187795daee87709aac4f06ff92388d3c8d5b677637c361547185b5a684ad543138b9267e6a4720a40364ecdd56f7ce44e63f018167f4e6b9c79a99b3f4ed6d78322590b9e198c689dfea3e4a99016e73a69a3a0981093a22b0a47b9f877cc86a1d34f3ffdaaf617e33402db98acdeafe84a6b77e237140f9ecaa8118c7b12c3e5bd50fd7fd9437bd1c8fd34538c1f80d2a91678d0c9344f51901573762e0fbf2a5d6059d1a4a07746490f957bc024e33458fadb14a49b2e58aa79cef317d04db1b3aa88c85f0ea18e36b6efb431067f6bca41ab7c087288b4ba2afc278c55bd39af77485be44573a3bb9b057f84f5880cf41a4d4f88bf613a73a3b35cc63fef305b50cddaa129d1b750150b64ce11ff018eef17d36e55a46a58f618efba1c6970dc80ee0b7f97e073a93111437fd09820d384d27bf68f7970bf96e34791c22574a2806983e46fd728271521782e92000d22c91c276d3f2807a4f91e8c6d4afccace68fea5fd9911a2c359536eb294fff33ed96079269ebb3010e99656b4f76866285cb6d9b2e9a3739636bea33ea6722179a55a12e59cc5a6168f226cd35c1055066e1b84a46a066fea288e48f47479ca38df7377b94ed0af85d4fda2f023f55666c9f83d0d0208dd5cd6724a4a370b3fcc99727c014f2fb7c8687bd27b48409b746041cbaac762068483d909fd42ef9f58d1ccca7dac82a00ee476ad8d37cf2d252803da1b204ce8bc3660663cc34ec31634a2e2bf1296429412bdd8fff5f702ce2c637691837b630401349a311c8620f3f358ec80c472c008296845cb09275a3788c79d5b47704ddefcc875a14c75a6cf13f95b597d289c8863ffe7f73d0833630bc623b146a785462fbea8b214ac49bf585c5e21333dff4c686f623810595e88c9463871535bcdcf5ce9b09171f647ab574017103b3e661a7e240b1f744aa2bb4c0387296b2cc40218eb18e969d64cf7a4ec975905ff2d26dd82251ca22ce8c364990d6701d92cc8ed3e4126219d109428d29ad8661dae58fa610f7a7a120af1f42a77f22ba994020971df9b1844245611443f1a1610de5ef6cb1c067854c99719345c8ffcd7108f5180b7b81624a73aa220c0bf188526870055bd18f42ed1879f131a1372f7c2cdd8b2cd67b8839cc2dc1db7f15462e5f08de011da1bb8089e79ce3874302d9568475b90720571a0461ace8551a94b1ac3b35c168ec336bed0ff150fcda5073a528f5ea0aea57392a433a96f8e85e29e3872c3a9e5e0b4b838cefe39335cda300037bd71a79d1ae1b2729f3b458f5d2ac08da342daae22cf33a6375c677804bac2db636bed8c80adcc3155cbf60639c28880835409ca96b771da50d8eff178e2be7e6f836699706e439a8114119e9bf98f122109c2e4d36bd07c695bc912aaa0a646b49caac927c0042684498809ff65bb0942bac306cd586e9fd728cab3b402dbd202351dad046a3cff8ac279826520e3c925655d2c9c34602da01ae123864d3c758e4b05e7ac48f93daf8775b9effe40fd4a0762e9f8f5d6058d6f098fa6a7175602132058073b60910a4de9f172a5404d8bd330b414964f29ae748708fc48e6c984b6559cd895cb53c07cfeada57af296a3e7882c12b8498e5c3f75748b1b7102def6464223864f03669f02fd98144f2e68fcc6419d73414742ffefef91d34ff7421e4eb0e1e18add4ec642f6076cc99eef9c01b1d9a37ef5c18146b21216149e41c14dae9a4dd7382c3db244fdb913a514a4a91ca114d723234d2d4c2850804983f47e06fd9a79a7c2bb38b9ca7e3fe56262386a315bd73ce0c7ee290c832fa77b282713d4094c753929d8cb532afa37a4e26788b68c271d58178d59760ea4eeb9012bdd38ca2fbcbccbde3815f699d142c0ccba4f4d688ba1c51f42559f7da77c6559f21384fba7d109ca9ab632fc6cd96bd12bf75ce9d633c677ac419eadc00fc6d7c54775b500adc2e773461cb96c778030bd39d397676e9cdd8e25d40d9f6dcfd9889bbc22f1c8d94257f316f5efd56daae8f7b3f92359ac3890c48d6b903183f9313f9e92a851eff1405d89b93e95965e4102e769a4ba000000574d27060001eb0bd81700000e2a8f323e300d8b020000000001595a68800200a40100000000000000000100000060000000ffffffff00000000ff0100007c0100000200ed01000000000000000002000000dc010000ffffffff00000000d80b0000100600000100ed0100000000000000000300000000000000020000002d000000040000002a800100000000000000010000000000000002000800696e666f2e6a736f6e2400010002000400736e616b6504800000000082080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
```

- Snake remove cartridge

```shell
input=0xa850c5824429c48c5c15205b66056fd426b7c72940c2b366a7f746a7989b53730d52bb5c
```

- Snake tape

```shell
input=0x49ee5e364429c48c5c15205b66056fd426b7c72940c2b366a7f746a7989b53730d52bb5c86e9ebacee2ca072cc896201d11c142fcfda227f91e88765a6e8136006b5882a00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007f01010404910000000300000000000000676866695dcc416ec3400c43513d4a33751cf4fed7edc2718d165a7c52045945d29d5caca2ead6dd575275f3affe6d74fdfb95f2e4f7fae31fe6731f5fb6c1615949641c96783bf5b56a59c684182c5b7c1b71622b5b6c2ce30c55d1be74062d68949797433b13ef6ca5153a3bf30300
```

- Snake create simple rule

```shell
input=0x494fdad84429c48c5c15205b66056fd426b7c72940c2b366a7f746a7989b53730d52bb5c00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000000673696d706c65000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000573636f7265000000000000000000000000000000000000000000000000000000
```

- Snake scoreboard tape

```shell
input=0xc0b7397ca7a39b72f29718e653e73503210fbb597057b7a1c77d1fe321a1afcff041d4e186e9ebacee2ca072cc896201d11c142fcfda227f91e88765a6e8136006b5882a0000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000007f01010404910000000300000000000000676866695dcc416ec3400c43513d4a33751cf4fed7edc2718d165a7c52045945d29d5caca2ead6dd575275f3affe6d74fdfb95f2e4f7fae31fe6731f5fb6c1615949641c96783bf5b56a59c684182c5b7c1b71622b5b6c2ce30c55d1be74062d68949797433b13ef6ca5153a3bf30300
```

Then send the input with:

```shell
sunodo send generic --chain-id=31337 --rpc-url=http://127.0.0.1:8545 \
    --mnemonic-index=0 --mnemonic-passphrase='test test test test test test test test test test test junk'\
    --dapp=0x70ac08179605AF2D9e75782b8DEcDD3c22aA4D0C --input=$input
```

### Queries

List of cartridges (and with filters)

```shell
curl -s "http://localhost:8080/inspect/core/cartridges" | jq -r '.reports[0].payload' | xxd -r -p | jq
curl -s "http://localhost:8080/inspect/core/cartridges?tags=2d&name=nake&tags=action" | jq -r '.reports[0].payload' | xxd -r -p | jq
```

Cartridge info

```shell
curl -s http://localhost:8080/inspect/core/cartridge_info?id=4429c48c5c15205b66056fd426b7c72940c2b366a7f746a7989b53730d52bb5c | jq -r '.reports[0].payload' | xxd -r -p | jq
```

Cartridge binary (could get from graphql with indexer too once inserted)

```shell
curl -s http://localhost:8080/inspect/core/cartridge?id=4429c48c5c15205b66056fd426b7c72940c2b366a7f746a7989b53730d52bb5c | jq -r '.reports[0].payload'
```

Cartridge rules

```shell
curl -s "http://localhost:8080/inspect/core/rules?cartridge_id=4429c48c5c15205b66056fd426b7c72940c2b366a7f746a7989b53730d52bb5c" | jq -r '.reports[0].payload' | xxd -r -p | jq
```

indexer queries

```shell
curl -s http://localhost:8080/inspect/indexer/indexer_query?tags=score | jq -r '.reports[0].payload' | xxd -r -p
curl -s "http://localhost:8080/inspect/indexer/indexer_query?tags=tape&msg_sender=0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266" | jq -r '.reports[0].payload' | xxd -r -p
```

Indexer score from rule

```shell
indexer_result=$(curl -s http://localhost:8080/inspect/indexer/indexer_query?tags=score | jq -r '.reports[0].payload' | xxd -r -p | jq)
curl -s -H 'Content-Type: application/json' -X POST "http://localhost:8080/graphql" -d "{ \"query\":\"query { notice(inputIndex:$(echo $indexer_result | jq -r '.[0].input_index'),noticeIndex:$(echo $indexer_result | jq -r '.[0].output_index')) { payload}}\"}}" | jq -r '.data.notice.payload' | sed -r 's/^0x//' | tr -d '\n' | xxd -c 32
```
